---
title: "BMIN-GA 1005 Programming for Data Analysis: Tidy Data"
author: "Fred LaPolla"
date: "2024-07-18"
output: slidy_presentation
---

```{r setup, include=TRUE}
knitr::opts_chunk$set(echo = TRUE)
```



## Tidy Data

Tidy data is a framework for organizing data. It says that each column represents one variable, or class of information like height, weight, age etc. Each row is one observation or record. 

Data can be untidy and still useful for analysis. 

## Working with EHR data

EHR data may be stored in a "long" data format with potentially the same patient spread across multiple rows, and a "description" column that can contain values like height, weight and other clinical measures, with another column for value, and another for unit.

Here is one table of synthetic EHR data from a company called Synthea, which aims to create simulated data about Massachusetts 
```{r }
ehr <- read.csv("https://raw.githubusercontent.com/fredlapolla/VilcekSummerDataAnalysis2024/main/observations.csv", headers = T)

```




## Subsetting with the tidyverse packages

Often the data we have to work with needs to be organized in some way, for example we may only want a subset or be interested in certain values. While this can be done using indexing and if statements, R has packages that make it easier to do this.

One is the Tidyverse, which is actually a collection of R packages. 

***

## Subsetting with Tidy Data

A good option is called filter for getting a subset. Let's say we are only interested in the Youngest age group of our nyc data. We can try:

```{r}

library(tidyverse)
youths <- filter(nyc, AGEGROUP == "Youngest")
```

***


## Operators in R

</br>
</br>
</br>
R works with multiple operators in these equations:

== means is equal to. One equal sign is used to assign values (like <-), and as an argument feature in some functions (size = 10).

(ignore the quote mark below, it is for formatting only)

'> greater than

'>= great than or equal to

'< less than

'<= less than or equal to

&& And

|| Or

!= Not equal to. 

***

## On your own

Make a filtered subset of straing to only contain the aged group nyc using tidyverse's Filter command.

```{r}

```





****

## Use of filter and operators

</br>
</br>
</br>

You can combine these terms with the filter command to make subsets that meet certain criteria. Maybe you would only want gene expression levels above some threshold. In this case try filtering to only work with high cholesterol individuals, over 200. 

```{r}

```


***

## Select

</br>
</br>
</br>

Often we may want to combine commands. An example of this is to choose a single column of a dataframe to run some analysis on it. 

In the Tidyverse, a nice feature is a command called a pipe:

%>%

The pipe takes whatever is to the left of it and runs it into the command to the right, which can cut down on the complexity of nested statements:

```{r}
YoungLead <- nyc %>% filter(AGEGROUP == "Youngest") %>%  select(LEAD) %>% unlist()
mean(YoungLead, na.rm = TRUE)
```

***

## Select

In practical terms this could be convenient if we wanted to get two subsets to compare with a T Test or some other metric. 

***

## On Your Own: filter and operators

</br>
</br>
</br>

You can combine these terms with the filter command to make subsets that meet certain criteria. Try out getting only the males with diabetes in this using filter. 

```{r}

```

***

## Long and wide data


# Bibliography



Jason Walonoski, Mark Kramer, Joseph Nichols, Andre Quina, Chris Moesel, Dylan Hall, Carlton Duffett, Kudakwashe Dube, Thomas Gallagher, Scott McLachlan, Synthea: An approach, method, and software mechanism for generating synthetic patients and the synthetic electronic health care record, Journal of the American Medical Informatics Association, Volume 25, Issue 3, March 2018, Pages 230–238, https://doi.org/10.1093/jamia/ocx079

Wickham, H. . (2014). Tidy Data. Journal of Statistical Software, 59(10), 1–23. https://doi.org/10.18637/jss.v059.i10